<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba</title>
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
    <style>
        .right{
            background: palegreen;
        }
        .wrong{
            background: salmon;
        }
        .oc{
            display: none;
        }
    </style>
    <link href="css/styles.css" rel="stylesheet" />
</head>
<body id="page-top">
    <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">Legislación</a>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li ><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#portfolio"></a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#about"></a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#contact"></a></li>
                </ul>
            </div>
        </div>
    </nav>

    <center>
        <section  class="page-section portfolio" id="portfolio">
            <br>
            <button class="btnIniciar" onclick="IniciarTest()">Iniciar Test</button>
            <div class="oc">
                <div class="pregunta"></div>
                <div class="respuestas"></div>
                <button onclick="mostrarpregunta(pospregunta)" >siguiente pregunta</button>
                <p>preguntas correctas : <span class="rightc">0</span></p>
            </div>
        </section>
    </center>

    <footer>
        
        <h1>prueba</h1>
    </footer>


    <script>
        let pospregunta = 0;
        let respuestacorrecta;
        let totalrespuestascorrectas = 0;
        let totalrespuestasincorrectas = 0;

        const cuestionary = [
            {
                "preguntas":"¿pregunta1?",
                "respuestas":["a","b","c"]
            },
            {
                "preguntas":"¿pregunta2?",
                "respuestas":["e","d","f"]
            },
            {
                "preguntas":"¿pregunta3?",
                "respuestas":["g","h","i"]
            },
            {
                "preguntas":"¿pregunta4?",
                "respuestas":["j","k","l"]
            },
            {
                "preguntas":"¿pregunta5?",
                "respuestas":["m","n","ñ"]
            }
        ]

        const mostrarpregunta = (i) =>{
            pospregunta++;
            const q = cuestionary[i];
            let a = q.respuestas;
            respuestacorrecta = a[0];
            a = a.sort((a,b) => Math.floor(Math.random()*3)-1);

            const htmlrespuestaArray = a.map(currentA => `<p class="p"><button onclick="evaluarpregunta('${currentA}', this)" id="r">X</button><span> ${currentA}</span></p>`);

            const htmlrespuesta = htmlrespuestaArray.join(' ');

            let htmlpregunta = `<p>${q.preguntas}</p><div>${htmlrespuesta}</div>`; 

            document.querySelector('.pregunta').innerHTML = htmlpregunta;
            //document.querySelector('.respuestas').innerHTML = htmlrespuesta;
        }

        const evaluarpregunta = (respuestas,obj) =>{
            document.querySelectorAll('.p').forEach(a => a.classList.remove('right','wrong'));
            const parentP = obj.parentNode;
            if(respuestas == respuestacorrecta){
                //parentP.classList.add('right');
                totalrespuestascorrectas++;
                document.querySelector('.rightc').innerHTML = totalrespuestascorrectas;
            }else{
                //parentP.classList.add('wrong');
                totalrespuestasincorrectas++;
            }
        }
        const IniciarTest = _ =>{
            mostrarpregunta(pospregunta);
            document.querySelector('.btnIniciar').style.display = 'none';
            document.querySelector('.oc').style.display = 'block';
        }   
        //console.log(totalrespuestascorrectas);
    </script>
    
</body>
</html>